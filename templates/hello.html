<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Gestion Biblioth√®que - Alwaysdata</title>
    <style>
        body { font-family: sans-serif; margin: 40px; line-height: 1.6; background-color: #f4f4f4; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        section { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        h2 { color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; }
        .admin-box { background: #fff3cd; padding: 15px; border-radius: 5px; }
        .btn { padding: 8px 15px; text-decoration: none; border-radius: 4px; cursor: pointer; border: none; }
        .btn-blue { background: #3498db; color: white; }
        .btn-green { background: #27ae60; color: white; }
    </style>
</head>
<body>

<div class="container">
    <h1>üìö Ma Biblioth√®que Moderne</h1>

    <section>
        <h2>üîç Rechercher un livre</h2>
        <form action="/fiche_nom" method="GET">
            <input type="text" name="nom" placeholder="Titre du livre..." style="padding: 8px; width: 250px;">
            <button type="submit" class="btn btn-blue">Lancer la recherche</button>
        </form>
    </section>

    <section>
        <h2>üìñ Catalogue des Livres</h2>
        <p><i>Note : Dans ce syst√®me, l'adresse correspond au stock.</i></p>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Titre</th>
                    <th>Auteur</th>
                    <th>Stock / √âtat</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% if data %}
                    {% for row in data %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[2] }}</td>
                        <td>{{ row[3] }}</td>
                        <td>{{ row[4] }}</td>
                        <td><button class="btn btn-blue" onclick="alert('Emprunt r√©ussi pour : {{ row[2] }}')">Emprunter</button></td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr><td colspan="5">Cliquez sur <a href="/consultation/">Afficher le catalogue</a> pour voir les livres.</td></tr>
                {% endif %}
            </tbody>
        </table>
    </section>

    <section class="admin-box">
        <h2>üõ°Ô∏è Administration</h2>
        
        {% if not session.get('authentifie') %}
            <p>Veuillez vous identifier pour g√©rer les stocks.</p>
            <form action="/authentification" method="POST">
                <input type="text" name="username" placeholder="Identifiant" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit" class="btn btn-green">Connexion</button>
            </form>
        {% else %}
            <p style="color: green;">‚úÖ Connect√© en tant qu'Administrateur</p>
            <h3>Ajouter un nouveau livre</h3>
            <form action="/enregistrer_client" method="POST">
                <input type="text" name="nom" placeholder="Titre" required>
                <input type="text" name="prenom" placeholder="Auteur" required>
                <input type="text" name="adresse" placeholder="Stock (ex: 5 dispo)" required>
                <button type="submit" class="btn btn-green">Enregistrer le livre</button>
            </form>
            <br>
            <a href="/logout" style="font-size: 0.8em;">Se d√©connecter</a>
        {% endif %}
    </section>
</div>

</body>
</html>
